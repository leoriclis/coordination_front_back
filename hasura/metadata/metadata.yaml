version: 3
sources:
  - name: default
    kind: postgres
    tables:
      - table:
          schema: public
          name: company
        select_permissions:
          - role: user
            permission:
              columns:
                - id
                - name
                - created_at
                - updated_at
              filter:
                id:
                  _eq: X-Hasura-Company-Id
      - table:
          schema: public
          name: product
        object_relationships:
          - name: company
            using:
              foreign_key_constraint_on: company_id
        select_permissions:
          - role: user
            permission:
              columns:
                - id
                - name
                - comment
                - quantity
                - company_id
                - created_at
                - updated_at
              filter:
                company_id:
                  _eq: X-Hasura-Company-Id
